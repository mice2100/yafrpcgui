<!DOCTYPE html>
<html window-width="960" window-height="800" window-min-width="840" window-min-height="640" window-resizable>
<head>
    <title>YAFRPC - Proxy Control Deck</title>
    <link rel="stylesheet" href="common.css" />
    <style>
        body {
            min-width: 840px;
            min-height: 640px;
            padding: var(--space-8);
            background: var(--color-surface-warm);
            background-image:
                radial-gradient(circle at 20% 30%, rgba(13, 148, 136, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(245, 158, 11, 0.02) 0%, transparent 50%);
            flow: vertical;
            border-spacing: var(--space-6);
        }

        /* ============================================================
           HEADER - Clean Technical Style
           ============================================================ */
        .header {
            flow: horizontal;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-5) var(--space-6);
            background: var(--color-surface-card);
            border-radius: var(--radius-md);
            border: var(--border-card);
            position: relative;
            box-shadow: var(--shadow-md);
        }

        .header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg,
                var(--color-teal) 0%,
                var(--color-amber) 100%);
            border-radius: var(--radius-md) var(--radius-md) 0 0;
        }

        .header-brand {
            flow: vertical;
            border-spacing: var(--space-1);
        }

        .header h1 {
            font-size: var(--text-lg);
            font-weight: 700;
            letter-spacing: 0.1em;
            color: var(--color-text-primary);
            text-transform: uppercase;
        }

        .header-subtitle {
            font-size: var(--text-xs);
            font-family: "SF Mono", "Consolas", "Monaco", monospace;
            color: var(--color-teal);
            text-transform: uppercase;
            letter-spacing: 0.12em;
            opacity: 0.85;
        }

        /* ============================================================
           SECTIONS
           ============================================================ */
        .section {
            margin-bottom: 6px;
            animation: slideUp 0.25s ease-out backwards;
        }

        .section:nth-child(1) { animation-delay: 0.05s; }
        .section:nth-child(2) { animation-delay: 0.1s; }
        .section:nth-child(3) { animation-delay: 0.15s; }
        .section:nth-child(4) { animation-delay: 0.2s; }

        .section:last-child {
            /*margin-bottom: 0;*/
        }

        .section-header {
            flow: horizontal;
            align-items: center;
            padding: 0 var(--space-2);
            margin-bottom: var(--space-4);
        }

        .section-title {
            font-size: var(--text-xs);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: var(--color-teal);
            font-family: "SF Mono", "Consolas", "Monaco", monospace;
        }

        .section-count {
            margin-left: var(--space-3);
            padding: 0 var(--space-3);
            background: var(--color-surface-subtle);
            border-radius: var(--radius-sm);
            font-size: 9px;
            font-family: var(--font-mono);
            font-weight: 700;
            color: var(--color-text-secondary);
            min-width: 20px;
            text-align: center;
            border: var(--border-subtle);
        }

        .section-actions {
            margin-left: *;
            flow: horizontal;
            border-spacing: var(--space-3);
        }

        .section-body {
            background: var(--color-surface-card);
            border-radius: var(--radius-md);
            padding: var(--space-5);
            border: var(--border-card);
            position: relative;
            box-shadow: var(--shadow-card);
        }

        .section-body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg,
                var(--color-teal) 0%,
                rgba(13, 148, 136, 0.4) 50%,
                var(--color-teal) 100%);
            border-radius: var(--radius-md) 0 0 var(--radius-md);
            opacity: 0.7;
        }

        /* ============================================================
           FORM GRID
           ============================================================ */
        .form-grid {
            flow: horizontal-wrap;
            border-spacing: var(--space-4);
        }

        .form-field.fixed {
            width: 75px;
        }

        .form-field.medium {
            width: 115px;
        }

        /* ============================================================
           CARD GRID
           ============================================================ */
        .card-grid {
            flow: horizontal-wrap;
            border-spacing: var(--space-4);
        }

        .card {
            width: 170px;
            background: var(--color-surface-card);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            flow: vertical;
            border-spacing: var(--space-4);
            border: var(--border-card);
            transition: all var(--transition-normal);
            animation: slideUp 0.25s ease-out backwards;
            position: relative;
            box-shadow: var(--shadow-sm);
        }

        .card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg,
                transparent 0%,
                var(--color-teal) 50%,
                transparent 100%);
            opacity: 0;
            transition: opacity var(--transition-normal);
        }

        .card:hover {
            border-color: rgba(13, 148, 136, 0.2);
            box-shadow: var(--shadow-lg);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-header {
            flow: horizontal;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--color-text-primary);
            max-width: 110px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            letter-spacing: 0.02em;
        }

        .card-actions {
            flow: horizontal;
            border-spacing: var(--space-1);
        }

        .card-row {
            font-size: var(--text-xs);
            flow: horizontal;
            border-spacing: var(--space-3);
            align-items: center;
        }

        .card-row .label {
            color: var(--color-text-muted);
            font-family: "SF Mono", "Consolas", "Monaco", monospace;
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            min-width: 45px;
        }

        .card-row .value {
            color: var(--color-text-tertiary);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* ============================================================
           SPLITTER
           ============================================================ */
        splitter {
            height: var(--space-8);
            background: transparent;
        }

        /* ============================================================
           TERMINAL
           ============================================================ */
        terminal {
            background: #1a1d23;
            border-radius: var(--radius-md);
            padding: var(--space-4);
            font-family: "SF Mono", "Consolas", "Monaco", monospace;
            font-size: var(--text-xs);
            line-height: 1.6;
            min-height: 120px;
            max-height: 200px;
            color: #34d399;
            border: var(--border-card);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        /* ============================================================
           EMPTY STATE
           ============================================================ */
        .empty-state {
            padding: var(--space-14) var(--space-8);
            text-align: center;
            color: var(--color-text-muted);
            font-size: var(--text-sm);
            border: 1px dashed rgba(0, 0, 0, 0.12);
            border-radius: var(--radius-md);
            background: var(--color-surface-subtle);
        }

        .empty-state .icon {
            font-size: 32px;
            margin-bottom: var(--space-4);
            opacity: 0.3;
            color: var(--color-teal);
        }

    </style>
</head>

<body>
    <header class="header">
        <div class="header-brand">
            <h1>YAFRPC</h1>
            <div class="header-subtitle">Control Deck v1.0</div>
        </div>
        <div id="statusIndicator" class="status-badge stopped">○ Stopped</div>
    </header>

    <section class="section">
        <div class="section-header">
            <span class="section-title">Connection</span>
            <div class="section-actions">
                <button id="startStopButton" class="primary">Start</button>
                <button id="applyButton">Apply</button>
            </div>
        </div>
        <div class="section-body">
            <div class="form-grid">
                <div class="form-field flex">
                    <label class="form-label" for="serverAddr">Server</label>
                    <input|text id="serverAddr" placeholder="frp.example.com" />
                </div>
                <div class="form-field flex">
                    <label class="form-label" for="serverPort">Port</label>
                    <input|text id="serverPort" filter="0~9"placeholder="7000" />
                </div>
                <div class="form-field flex">
                    <label class="form-label" for="transProtocol">Protocol</label>
                    <select id="transProtocol">
                        <option value="tcp">TCP</option>
                        <option value="kcp">KCP</option>
                        <option value="quic">QUIC</option>
                        <option value="websocket">WS</option>
                        <option value="wss">WSS</option>
                    </select>
                </div>
                <div class="form-field flex">
                    <label class="form-label" for="token">Token</label>
                    <input|password id="token" placeholder="••••••">
                </div>
                <div class="form-field flex">
                    <label class="form-label" for="user">User</label>
                    <input|text id="user" placeholder="Optional">
                </div>
                <div class="form-field flex">
                    <label class="form-label" for="webServerPort">DashPort</label>
                    <input|text filter="0~9" id="webServerPort" placeholder="8888">
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="section-header">
            <span class="section-title">Proxies <span id="proxyCount" class="section-count">0</span></span>
            <div class="section-actions">
                <button id="addProxy" class="add-btn">
                    + Add Proxy
                </button>
            </div>
        </div>
        <div id="proxyList" class="card-grid"></div>
    </section>

    <section class="section">
        <div class="section-header">
            <span class="section-title">Visitors <span id="visitorCount" class="section-count">0</span></span>
            <div class="section-actions">
                <button id="addVisitor" class="add-btn">
                    + Add Visitor
                </button>
            </div>
        </div>
        <div id="visitorList" class="card-grid"></div>
    </section>

    <splitter />

    <section class="section">
        <div class="section-header">
            <span class="section-title">Console Output</span>
        </div>
        <terminal #log rows="300"></terminal>
    </section>

    <script type="module" src="main.js"></script>
</body>
</html>
